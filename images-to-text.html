<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Images to Text</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
      <!-- updated desc,keyword -->
    <meta name="description" content="img to text Converter is a program that allows you to convert image files into text formats.">
    
    <meta name="keywords" content="jpg to text,text to jpg,convert text to jpg	,convert jpg to text	,png to text	,text to png	,convert text to png	,convert text to jpg free,photo to text converter,combine jpg to text,change text to jpg,convert jpg to text free,image to text converter">

    <meta name="author" content="Kaleem Waheed">

    <script type="application/ld+json">
      {
        "@context" : "https://schema.org",
        "@type" : "WebSite",
        "name" : "Images Pixel",
        "url" : "http://www.imagespixel.com/"
      }
    </script>

    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="./css2.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link href="./bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./bootstrap.bundle.min.js">
    <script src="./bootstrap.bundle.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4296519934945811"
    crossorigin="anonymous"></script>
</head>
<style>
    input[name="myfile[]"] {
    display: none;
}
.overlay{
        display: none;
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 2000;
        /* background: rgba(255,255,255,0.8) url("https://raw.githubusercontent.com/projectz-tayyab/photo_app/main/loader.gif") center no-repeat;*/
        background: rgba(255,255,255,0.8) url("./images/Processing.gif") center no-repeat;
    }
   /* body{
        text-align: center;
    } */
    /* Turn off scrollbar when body element has the loading class */
    body.loading{
        overflow: hidden;
    }
    /* Make spinner image visible when body element has the loading class */
    body.loading .overlay{
        display: block;
    }


    .loader_div{
      background: rgba(255,255,255,0.8) url("./images/Processing.gif") center no-repeat;
      position: absolute;
      z-index: 20000;
      width: 100%;
      height: 100%;
    }
</style>
<body>
  <div class="overlay"></div>
    <div id="navbar"></div>

  <section id="tool-section">
    <div class="container">
        <h1 class="h3 mb-0 text-center text-blue-5">Convert Images to text </h1>
        <p class="mb-4 mb-md-8 text-center text-grey-5 font-weight-light">Convert your Images files to text file</p>
  
        <div id="file-uploader-tool" class="row justify-content-center px-2 px-sm-0" data-max-files="5" data-max-upload-size="50" data-max-largest-upload-size="2048" data-fs-limits-enabled="1" data-fs-free-limit-warnings="1" data-cloud-picker-enabled="1" data-focus-tool-on-mobile="1">
  <div class="uploader-tool col-lg-10 flex-md-row max-w-1000 card shadow py-5 position-relative">
  <!-- <div class="lline"></div> -->
  <div class="llline" style="width: 50%;transform: translate(224px,87px);"></div>
  <div id="step-1" class="step active position-relative col-md-6 d-flex flex-column align-items-center px-6 px-md-0 pl-md-5">
      <div class="circle pulse mt-3 mb-3"></div>
    <h6 class="step-number-mobile d-block text-grey-4 text-center">Step 1 - Please select files </h6>
    <input id="image_upload" name="myfile[]" type="file" accept="image/*" class="d-none" multiple>
    <div class="btn-group btn-block" style="width: 274px;margin-top: 7px;">
        <button id="btn-input-file" style="padding: 10px 20px;" class="btn px-5 btn-success" onclick="document.getElementById('image_upload').click();">
            <span class="text-center"></span>Choose Files</button>
    </div>
    <p id="selected_count" class="text-muted small pt-2 m-0"></p>
  </div>

  
  <div id="step-3" class="step  col-md-6 d-flex flex-column align-items-center px-6 px-md-0 pr-md-5">
    <div class="circle  pulse1 mt-3 mb-3"></div>
  
    <h6 class="step-number-mobile d-block text-grey-4 text-center">Step 2 - Start converting</h6>
  
    <div class="step-number  d-md-flex align-items-center justify-content-center h3 bg-green-accent-3 text-white rounded-circle mb-8"></div>
  
    <button id="convert" class="btn btn-success" style="width: 274px; padding: 10px 20px;">Convert Now</button>
  
    <!-- <p class="text-muted small pt-2 m-0">(And agree to our <a href="./terms_of_use.html" target="_blank">Terms</a>)</p> -->
  </div>
  </div>
  <div class="row mt-5">
    <div class="col" id="results_div">
  
    </div>
  </div>
  </div>
  </div>            </div>
  </section>

            <div id="footer"></div>
<!-- new funcionality -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/notify.min.js"
integrity="sha512-efUTj3HdSPwWJ9gjfGR71X9cvsrthIA78/Fvd/IN+fttQVy7XWkOAXb295j8B3cmm/kFKVxjiNYzKw9IQJHIuQ=="
crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script type="module">
  $(document).ready(function(){
    $("#navbar").load("./components/navbar.html");
    $("#footer").load("./components/footer.html");
})
  var totalfiles = document.getElementById('image_upload').files.length;
      if(totalfiles===0){
        $('#selected_count').text('No files selected')
      }
  function download_result(folder_path){
  window.open(folder_path)
  // $('#results_div').empty('');
  $('.lline').css('width','0');
}
  
    var api_url = url_heavy

  document.getElementById("image_upload").onchange = function() {
    var totalfiles = document.getElementById('image_upload').files.length;
    var data_uri = $('#image_upload').prop('files')[0];
    var format = $('#option_val').val();
    $('#selected_count').text(totalfiles + ' files selected')
    if(totalfiles>=1){
            $('.uploader-tool').append('<div class="lline"></div>')
            $('.lline').css('width','50%')
            $('.llline').css('width','50%')
            $('.lline').css('transform','translate(224px,87px)')
            $('.llline').css('transform','translate(224px,87px)')
          }
    else{
      $.notify("Please select a maximum of 15 files", "error");
    }
    }
     
  document.getElementById("convert").onclick = function() {
    $('#results_div').empty('');
    var form_data = new FormData();
    // document.getElementById("form").submit();
    var totalfiles = document.getElementById('image_upload').files.length;
  if (totalfiles > 15){
    $.notify("Please select a maximum of 15 files", "error");
        return false;
  }
  for (var index = 0; index < totalfiles; index++) {
    form_data.append("file", document.getElementById('image_upload').files[index]);
  }
    var format = $('#option_val').find(":selected").val();
    var validExtensions = ['png', 'jpg', 'jpeg'];
    var data_uri = $('#image_upload').prop('files')[0];
    if (data_uri==undefined){
        $.notify("Please select any image file", "error");
        // $('#image_upload').val("")
        return false;
    }

    if (format==0){
        $.notify("Please select format", "error");
        return false;
    }


    var fileName = data_uri.name;
            var fileNameExt = fileName.substr(fileName.lastIndexOf('.') + 1);
            fileNameExt = fileNameExt.toLowerCase();
            if ($.inArray(fileNameExt, validExtensions) == -1){
                $.notify("Invalid file type", "error");
               
               return false;
            }
    

         var url = api_url + '/image_to_text/'
         $.ajax({
             type: "POST",
             url: url,
             data: form_data,
             cache: false,
             processData: false,
             contentType: false,
             crossDomain: true,
             beforeSend: function () {
                $("body").addClass("loading");
                },
             success: function(data) {
              $('#image_upload').val('');
              $('#selected_count').text('');
              $('#results_div').empty('');
              // $('#image_upload').attr('disabled','disabled');
                 var status = data['status']
                //  console.log(status);
                 var fname = data['zip_file_name']
                 var folder_path = data['zip_file_url']
                 var file_size = data['zip_file_size']


                 

                  a=''
                  a+='<table style="width: 86%;" class="table table-striped border shadow text-center">'
                  a+='<thead class="bg-blue-10 text-blue-4">'
                  a+='<tr class=" d-md-table-row">'
                  a+='<th class="font-weight-normal text-uppercase">File Name</th>'
                  a+='<th class="size12 font-weight-normal text-uppercase text-right">File Size</th>'
                  // a+='<th style="width: 20%;" class="font-weight-normal text-uppercase">Progress</th>'
                  a+='<th>Link</th>'
                  a+='</tr>'
                  a+='<tr class=" d-md-table-row">'
                  a+='<td class="font-weight-normal text-uppercase">'
                  a+=fname
                  a+='</td>'
                  a+='<td class="size12 font-weight-normal text-uppercase">'
                  a+=file_size
                  a+='</td>'
                  a+='<td><button class="btn btn-success" onclick="download_result(`'
                      a +=folder_path
                      a +='`)">Download</button></td>'
                  a+='</tr>'
                  a+='</thead>'
                  a+='<tbody>'
                  a+='</tbody>'
                  a+='</table>'
                      $('#results_div').append(a);
             },
             complete: function (data) {
                $("body").removeClass("loading");
                },
         });
};
</script>
</body>
</html>